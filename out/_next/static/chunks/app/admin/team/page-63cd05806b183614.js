(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84],{2726:function(e,t,a){Promise.resolve().then(a.bind(a,4959))},4959:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return s}});var r=a(7437),l=a(2265),n=a(2824),o=a(8311);function s(){let[e,t]=(0,l.useState)(!0),[a,s]=(0,l.useState)(!1),[i,d]=(0,l.useState)([]),[c,u]=(0,l.useState)(null);(0,l.useEffect)(()=>{m()},[]);let m=async()=>{try{let{data:e,error:t}=await o.O.from("site_content").select("data").eq("id","company").single();if(t)throw t;e&&(u(e.data),d(e.data.team||[]))}catch(e){console.error("Failed to fetch team:",e)}finally{t(!1)}},p=async e=>{e.preventDefault(),s(!0);try{let{data:e}=await o.O.from("site_content").select("data").eq("id","company").single(),t={...(null==e?void 0:e.data)||{},team:i},{error:a}=await o.O.from("site_content").upsert({id:"company",data:t,updated_at:new Date().toISOString()});if(a)throw a;alert("Team updated successfully!")}catch(e){console.error("Error updating team:",e),alert("Error updating team")}finally{s(!1)}},g=e=>{confirm("Remove this team member?")&&d(i.filter(t=>t.id!==e))},b=(e,t,a)=>{d(i.map(r=>r.id===e?{...r,[t]:a}:r))};return e?(0,r.jsx)("div",{className:"text-center py-12",children:"Loading..."}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Team Management"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage leadership team members"})]}),(0,r.jsx)("button",{onClick:()=>{let e=String(Math.max(...i.map(e=>parseInt(e.id)),0)+1);d([...i,{id:e,name:"",role:"",image:"",bio:""}])},className:"bg-[var(--primary)] text-black px-6 py-3 rounded-lg font-bold hover:bg-black hover:text-white transition-colors",children:"+ Add Member"})]}),(0,r.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[i.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold",children:["Team Member #",e.id]}),(0,r.jsx)("button",{type:"button",onClick:()=>g(e.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 font-bold",children:"Remove"})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Name"}),(0,r.jsx)("input",{type:"text",value:e.name,onChange:t=>b(e.id,"name",t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary)] outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Role"}),(0,r.jsx)("input",{type:"text",value:e.role,onChange:t=>b(e.id,"role",t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary)] outline-none"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Image URL"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"url",value:e.image,onChange:t=>b(e.id,"image",t.target.value),placeholder:"https://...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary)] outline-none"}),(0,r.jsx)(n.Z,{onUploadSuccess:t=>b(e.id,"image",t),buttonText:"\uD83D\uDCF8 Upload"})]})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Bio"}),(0,r.jsx)("textarea",{value:e.bio,onChange:t=>b(e.id,"bio",t.target.value),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary)] outline-none"})]})]})]},e.id)),0===i.length&&(0,r.jsx)("div",{className:"text-center py-12 text-gray-500",children:'No team members. Click "Add Member" to get started.'}),(0,r.jsx)("button",{type:"submit",disabled:a,className:"px-8 py-3 bg-[var(--primary)] text-black font-bold rounded-lg hover:bg-black hover:text-white transition-colors disabled:opacity-50",children:a?"Saving...":"Save Changes"})]})]})}},2824:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var r=a(7437),l=a(2265),n=a(357);function o(e){let{onUploadSuccess:t,folder:a="prem-properties",buttonText:o="Upload Image",buttonClass:s="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 font-bold"}=e,[i,d]=(0,l.useState)(!1),[c,u]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{if(window.cloudinary){u(!0);return}let e=document.createElement("script");return e.src="https://upload-widget.cloudinary.com/global/all.js",e.async=!0,e.onload=()=>u(!0),document.body.appendChild(e),()=>{}},[]),(0,r.jsx)("button",{type:"button",onClick:()=>{if(!c||!window.cloudinary){alert("Upload widget is still loading. Please try again in a moment.");return}d(!0);let e=window.cloudinary.createUploadWidget({cloudName:n.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME,uploadPreset:n.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET,folder:a,sources:["local","url","camera"],multiple:!1,maxFileSize:1e8,clientAllowedFormats:["jpg","jpeg","png","gif","webp","mp4","mov"],cropping:!1,showSkipCropButton:!0,styles:{palette:{window:"#FFFFFF",windowBorder:"#90A0B3",tabIcon:"#FFA600",menuIcons:"#5A616A",textDark:"#000000",textLight:"#FFFFFF",link:"#FFA600",action:"#FF620C",inactiveTabIcon:"#0E2F5A",error:"#F44235",inProgress:"#FFA600",complete:"#20B832",sourceBg:"#E4EBF1"}}},(a,r)=>{!a&&r&&"success"===r.event&&(t(r.info.secure_url),d(!1),e.close()),a&&(console.error("Upload error:",a),alert("Upload failed. Please try again."),d(!1))});e.open()},disabled:i||!c,className:s+(i||!c?" opacity-50 cursor-not-allowed":""),title:c?"":"Loading upload widget...",children:i?"Uploading...":c?o:"Loading..."})}},8311:function(e,t,a){"use strict";a.d(t,{O:function(){return o}});var r=a(7327);let l="https://fvhgtyexmwcseqrazqkw.supabase.co",n="sb_publishable_2GPFnXEdg1nekNwlG-oQrg_o4QmBg-N";l&&n||console.warn("Supabase credentials missing. Database features will not work.");let o=(0,r.eI)(l,n)}},function(e){e.O(0,[418,971,23,744],function(){return e(e.s=2726)}),_N_E=e.O()}]);